@model Orderaty.ViewModels.StoresProducts
@{
    ViewData["Title"] = "Home Page";
}

@section Styles {
    <link rel="stylesheet" href="~/css/home.css" asp-append-version="true" />
}

<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">Fast Delivery to Your Door</h1>
            <p class="hero-subtitle">Order from your favorite stores and get it delivered instantly</p>

            <div class="search-container">
                <div class="search-input-group">
                    <div class="search-input">
                        <i class="fas fa-map-marker-alt"></i>
                        <input type="text" placeholder="Enter address (e.g. 123 Main St, New York)">
                    </div>
                    <div class="search-input">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search for stores, items, or categories">
                        <button class="search-btn">Search</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Stores Section -->
<section class="featured-stores">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Featured Stores</h2>
            <a href="/Seller/Browse" class="view-all-btn">
                View All
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        <div class="stores-grid">
            @foreach(var store in Model.Sellers)
            {
                <a href="@Url.Action("Details", "Seller", new { id = store.Id })" class="store-card">
                    <div class="store-image">
                        <img src="~/images/users/@store.User.Image" alt="Fresh Market grocery store interior with fresh produce">
                        <button class="add-to-favorites" onclick="event.preventDefault(); event.stopPropagation(); MakeFavourite(this, '@store.User.Id')">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                    <div class="store-info">
                        <div class="store-badge">@store.Category.ToString()</div>
                        <h3 class="store-title">@store.User.FullName</h3>
                        <div class="store-meta">
                            <span class="rating">⭐ @store.Rating</span>
                            <span class="eta">20-30 min</span>
                        </div>
                    </div>
                </a>
            }
        </div>
    </div>
</section>

<!-- Trending Items Section -->
<section class="trending-items">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Trending Items</h2>
            <a href="/ClientProduct/Index" class="view-all-btn">
                View All
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        <div class="products-grid">
            @foreach(var product in Model.Products)
            {
                <div class="product-card">
                    <a href="@Url.Action("Details", "ClientProduct", new { id = product.Id })" class="product-link">
                        <div class="product-image">
                            <img src="~/images/products/@product.Image" alt="@product.Name">
                            <button class="add-to-favorites" onclick="event.preventDefault(); event.stopPropagation();">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>
                        <div class="product-info">
                            @*<div class="product-category">@product</div>*@
                            <h3 class="product-title">@product.Name</h3>
                            <p class="product-store">@product.Seller.User.FullName</p>
                            <div class="product-footer">
                                <div class="product-price">
                                    <span class="price">@product.Price EGP</span>
                                </div>
                                <button class="add-to-cart-btn" onclick="event.preventDefault(); event.stopPropagation();">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>
    </div>
</section>

<!-- Browse Categories Section -->
<section class="browse-categories">
    <div class="container">
        <h2 class="section-title">Browse Categories</h2>
        <div class="categories-grid">
            <div class="category-item">
                <div class="category-icon groceries">
                    <i class="fas fa-shopping-bag" ></i>
                </div>
                <span class="category-label">Groceries</span>
            </div>
            
            <div class="category-item">
                <div class="category-icon food">
                    <i class="fas fa-pizza-slice"></i>
                </div>
                <span class="category-label">Food</span>
            </div>
            
            <div class="category-item">
                <div class="category-icon pharmacy">
                    <i class="fas fa-prescription-bottle"></i>
                </div>
                <span class="category-label">Pharmacy</span>
            </div>
            
            <div class="category-item">
                <div class="category-icon packages">
                    <i class="fas fa-box-open"></i>
                </div>
                <span class="category-label">Packages</span>
            </div>
            
            <div class="category-item">
                <div class="category-icon restaurants">
                    <i class="fas fa-utensils"></i>
                </div>
                <span class="category-label">Restaurants</span>
            </div>
            
            <div class="category-item">
                <div class="category-icon coffee">
                    <i class="fas fa-coffee"></i>
                </div>
                <span class="category-label">Coffee</span>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        function MakeFavourite(btn, sellerId){
            var icon = $(btn).find("i");

            $.ajax(
                {
                    url: "/Favourite/Make?sellerId="+sellerId,
                    // data : {id : empId},
                    type : "POST",
                    success: function(result){
                        console.log(result)
                        if (result === false) {
                            icon.removeClass("fas").addClass("far").css("color", "");
                        }
                        else {
                            icon.removeClass("far").addClass("fas").css("color", "red");
                        }
                    }
                } 
            );
        }
    </script>
}